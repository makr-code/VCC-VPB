---
version: 1
normalize:
  authority:
    - pattern: "(?i)Landkreis ([A-Za-z-]+)"
      replace: "LK {1}"
    - pattern: "(?i)Stadt ([A-Za-z-]+)"
      replace: "Stadt {1}"
  aktenzeichen:
    - pattern: "([A-Z]{1,4})[-\s]?([0-9]{2,6})/(20[0-9]{2}|[0-9]{2})"
      group_map:
        series: 1
        number: 2
        year: 3
signals:
  date_from_title:
    pattern: "(20[0-9]{2}-[01][0-9]-[0-3][0-9])"
inference:
  steps:
    - id: intake
      if:
        any:
          - authority_matches: "^(LK |Stadt )"
          - aktenzeichen.series_in: [AZ, V, VB]
      weight: 0.6
    - id: review
      if:
        after_days: 7
      weight: 0.3
    - id: decision
      if:
        after_days: 30
      weight: 0.2
  transitions:
    - from: intake
      to: review
      if:
        min_days_between: 3
      weight: 0.4
    - from: review
      to: decision
      if:
        min_days_between: 14
      weight: 0.3
